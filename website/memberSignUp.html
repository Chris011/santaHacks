<head>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.145.0.min.js"></script>
    <script src="config.js"></script>
    <script>
    var config = new AWS.Config({
    accessKeyId: config.key, secretAccessKey: config.secret, region: config.s3region
    });

    var s3 = new AWS.S3(config);
    const sourceBucket = "setup.santahacks.com";
    const sourceType = "application/json";
    const urlParams = new URLSearchParams(window.location.search);
    const sourceKey = urlParams.get("org") + ".json";

    console.log("Key: " + config);
    console.log("SourceKey: " + sourceKey);

    AWS.config.update({
        region: config.s3region,
        credentials: new AWS.CognitoIdentityCredentials({
            IdentityPoolId: config.poolID
        })
    });
    
    var params = {
    Bucket: sourceBucket, /* required */
    Key: sourceKey, /* required */
    ResponseContentType: sourceType,
    };
    s3.getObject(params, function(err, data) {
    if (err) console.log(err, err.stack); // an error occurred
    else     console.log(data);           // successful response
    });
    </script>
    <script>console.log("Hello");</script>
</head>
<body>
    
    <h1>Hello world!</h1>
</body>